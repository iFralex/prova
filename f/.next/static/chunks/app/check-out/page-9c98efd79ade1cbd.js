(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4374:function(e,t,s){Promise.resolve().then(s.bind(s,3632))},8960:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(8030).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},3632:function(e,t,s){"use strict";s.d(t,{PaymentProgress:function(){return S}});var i=s(7437),r=s(7983),a=s(9733),l=s(402),n=s(1014),c=s(2513),d=s(8960),o=s(8030);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,o.Z)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),x=(0,o.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var m=s(3274),f=s(6463),h=s(2265),g=s(9343),p=s(9772),j=s(5894),b=s(112),v=s(9973),y=s(8185);let N=p.z.object({name:p.z.string().min(3,{message:"Il nome \xe8 troppo breve"}).max(60,{message:"L'indirizzo email \xe8 troppo lungo"})}),k=e=>{let{}=e,{control:t,handleSubmit:s,formState:{errors:a,isSubmitting:l},setError:c}=(0,g.cI)({resolver:(0,n.F)(N),mode:"onBlur"});return(0,f.useRouter)(),(0,i.jsx)(r.Signup,{targetPageForEmailLink:"check-out"})},w=e=>{let{addresses:t,userId:s,handleSubmit:r}=e,[n,d]=(0,h.useState)("");return console.log(s,t[0]),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"mb-4 text-2xl font-bold text-center",children:"I tuoi indirizzi"}),0===t.length?(0,i.jsx)("p",{className:"text-muted-foreground italic mb-3 text-center",children:"Nessun indirizzo salvato. Premi il pulsante per aggiungerne uno."}):(0,i.jsx)(b.E,{defaultValue:t[0].id,onValueChange:d,children:t.map((e,r)=>(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[(0,i.jsx)(b.m,{value:e.id,id:e.key}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsx)("div",{className:"flex items-start",children:(0,i.jsx)("div",{children:(0,i.jsxs)(l._,{htmlFor:e.key,children:[(0,i.jsxs)("p",{className:"font-bold",children:[e.street," ",e.houseNumber]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[e.postalCode," ",e.city,", ",e.state]}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.country}),e.details&&(0,i.jsxs)("p",{className:"text-sm",children:["Altre info: ",(0,i.jsx)("span",{className:"text-muted-foreground",children:e.details})]})]})})}),(0,i.jsx)("div",{className:"flex space-x-2",children:(0,i.jsx)(j.DeleteAddressLoadingDialog,{userId:s,address:e})})]}),r<t.length-1&&(0,i.jsx)(v.Separator,{className:"my-4"})]})]},e.key))}),(0,i.jsxs)("div",{className:"flex justify-end w-full mt-4 gap-2",children:[(0,i.jsx)(j.AddressForm,{trigger:(0,i.jsx)(a.z,{size:"icon",children:(0,i.jsx)(c.Z,{})})}),(0,i.jsx)(a.z,{disabled:!t.length&&!n,onClick:()=>r(n),children:"Continua"})]})]})},z=e=>{let{currentStep:t}=e,s=e=>{let s=C.findIndex(e=>e.value===t);return{isComplete:C.findIndex(t=>t.value===e)<s,isCurrent:e===t}};return(0,i.jsxs)("div",{className:"relative mt-2",children:[(0,i.jsx)("div",{className:"absolute top-5 left-0 w-full h-2 bg-gradient-to-r from-gray-200 via-gray-200 to-gray-200 rounded-full"}),(0,i.jsx)("div",{className:"absolute top-5 left-0 h-2 bg-gradient-to-r from-blue-500 via-blue-400 to-blue-500 rounded-full transition-all duration-500",style:{width:"".concat(C.findIndex(e=>e.value===t)/(C.length-1)*100,"%")}}),(0,i.jsx)("div",{className:"relative flex justify-between",children:C.map((e,t)=>{let{isComplete:r,isCurrent:a}=s(e.value),l=e.icon;return(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"\n                    w-12 h-12 rounded-full flex items-center justify-center\n                    transition-all duration-300 shadow-lg\n                    ".concat(r?"bg-gradient-to-r from-blue-500 to-blue-600":a?"bg-white border-2 border-blue-500":"bg-white border-2 border-gray-200"),children:(0,i.jsx)(l,{className:"\n                      w-6 h-6\n                      ".concat(r?"text-white":a?"text-blue-500":"text-gray-400","\n                    ")})}),(0,i.jsx)("span",{className:"\n                    mt-3 text-sm font-medium\n                    ".concat(r||a?"text-blue-600":"text-gray-400","\n                  "),children:e.label})]},e.value)})})]})},C=[{value:"login",label:"Accesso",icon:d.Z,title:"Crea un account",desc:"Per aggiornarti sui tuoi ordini e per tenere registrati i tuoi ordini \xe8 necessario un account. Tranquillo: \xe8 semplice e veloce, e magari in futuro ti becchi pure un codice sconto!"},{value:"shipping",label:"Spedizione",icon:u,title:"Aggiungi o seleziona il tuo indirizzo",desc:"Per aggiornarti sui tuoi ordini e per tenere registrati i tuoi ordini \xe8 necessario un account. Tranquillo: \xe8 semplice e veloce, e magari in futuro ti becchi pure un codice sconto!"},{value:"payment",label:"Pagamento",icon:x,title:"Paga,",desc:"Per aggiornarti sui tuoi ordini e per tenere registrati i tuoi ordini \xe8 necessario un account. Tranquillo: \xe8 semplice e veloce, e magari in futuro ti becchi pure un codice sconto!"}],S=e=>{let{startedStep:t,auth:s,addresses:r}=e,[a,l]=(0,h.useState)(0),[n,c]=(0,h.useState)(!0),[d,o]=(0,h.useState)({}),[u,x]=(0,h.useState)("");(0,f.useRouter)();let g={...C[a],index:a,setValue:e=>{let t=C.findIndex(t=>t.value===e);-1!==t&&l(t)},next:e=>{a<C.length-1&&(l(a+1),void 0!==e&&c(e))}};(0,h.useEffect)(()=>{(async()=>{try{c(!1)}catch(e){o({signin:e.message}),g.setValue("login"),console.log(e)}})()},[]),(0,h.useEffect)(()=>{g.setValue(t)},[t]);let p=e=>{x(e),g.next()};return(0,i.jsx)("div",{className:"container size-full flex items-center justify-center",children:(0,i.jsxs)(y.Zb,{className:"p-5 mx-auto grid grid-cols-1 md:grid-cols-2",children:[(0,i.jsxs)("div",{className:"p-5 relative",children:[(0,i.jsx)("h1",{className:"font-bold text-xl",children:g.title}),(0,i.jsx)("p",{className:"text-muted-foreground",children:g.desc}),(0,i.jsx)(z,{currentStep:g.value}),(0,i.jsx)("div",{className:"absolute hidden md:block top-0 bottom-0 right-0",children:(0,i.jsx)(v.Separator,{orientation:"vertical"})}),(0,i.jsx)("div",{className:"absolute md:hidden block left-0 bottom-0 right-0",children:(0,i.jsx)(v.Separator,{})})]}),(0,i.jsxs)("div",{className:"p-5 size-full",children:[n?(0,i.jsx)("div",{className:"size-full flex items-center justify-center",children:(0,i.jsx)(m.Z,{size:48,className:"animate-spin"})}):(()=>{switch(g.value){case"login":return(0,i.jsx)(k,{});case"shipping":return(0,i.jsx)(w,{addresses:r||[],userId:null==s?void 0:s.decodedToken.uid,handleSubmit:p});default:return(0,i.jsx)("p",{children:"non definito"})}})(),d.signin&&(0,i.jsx)("p",{children:d.signin})]})]})})}},8185:function(e,t,s){"use strict";s.d(t,{Zb:function(){return l}});var i=s(7437),r=s(2265),a=s(9354);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border border-slate-200 bg-white text-slate-950 shadow-sm dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s),...r})});l.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-slate-500 dark:text-slate-400",s),...r})}).displayName="CardDescription",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...r})}).displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"}},function(e){e.O(0,[481,691,868,231,472,173,281,948,552,383,464,983,894,971,23,744],function(){return e(e.s=4374)}),_N_E=e.O()}]);